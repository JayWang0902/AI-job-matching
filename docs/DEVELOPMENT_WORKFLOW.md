# ğŸš€ å¼€å‘å·¥ä½œæµå’Œç£ç›˜ç®¡ç†æŒ‡å—

## ğŸ¯ æ—¥å¸¸å¼€å‘æµç¨‹ï¼ˆæ¨èï¼‰

### åœºæ™¯ 1: æ­£å¸¸å¼€å‘ï¼ˆæœ€å¸¸ç”¨ï¼‰

```bash
# 1. å¯åŠ¨å¼€å‘ç¯å¢ƒ
./scripts/dev.sh

# 2. å¼€å‘ï¼ˆä¿®æ”¹ä»£ç ï¼Œè‡ªåŠ¨é‡è½½ï¼‰
# ... å†™ä»£ç  ...

# 3. ç»“æŸå¼€å‘
Ctrl + C  # åœæ­¢æ—¥å¿—è¾“å‡º

# 4. å…³é—­å®¹å™¨ âš ï¸ é‡è¦ï¼
./scripts/dev.sh down
```

**ä¸ºä»€ä¹ˆæŒ‰ Ctrl+C åè¿˜éœ€è¦ `./scripts/dev.sh down`ï¼Ÿ**

```
Ctrl + C          â†’  åªåœæ­¢å‰å°è¿›ç¨‹ï¼ˆæ—¥å¿—è¾“å‡ºï¼‰
                      å®¹å™¨è¿˜åœ¨åå°è¿è¡Œï¼âŒ
                      â†“
./scripts/dev.sh down â†’ çœŸæ­£åœæ­¢å¹¶åˆ é™¤å®¹å™¨ âœ…
```

éªŒè¯å®¹å™¨æ˜¯å¦è¿˜åœ¨è¿è¡Œï¼š
```bash
docker compose ps
# å¦‚æœçœ‹åˆ°å®¹å™¨ï¼Œè¯´æ˜è¿˜åœ¨è¿è¡Œ
```

---

## ğŸ’¾ ç£ç›˜ç©ºé—´ç®¡ç†

### é—®é¢˜ï¼šé•œåƒä¼šå †ç§¯å—ï¼Ÿ

**æ—§ç‰ˆè„šæœ¬ï¼ˆä½¿ç”¨ `--build`ï¼‰ï¼š**
```bash
# æ¯æ¬¡å¯åŠ¨éƒ½æ„å»º
docker compose up --build

é—®é¢˜ï¼š
âŒ æ¯æ¬¡éƒ½èŠ±æ—¶é—´æ„å»º
âŒ å¯èƒ½äº§ç”Ÿ <none> æ‚¬ç©ºé•œåƒ
```

**æ–°ç‰ˆè„šæœ¬ï¼ˆå·²ä¼˜åŒ–ï¼‰ï¼š**
```bash
# åªåœ¨å¿…è¦æ—¶æ„å»º
docker compose up

ä¼˜åŠ¿ï¼š
âœ… é¦–æ¬¡è¿è¡Œæ„å»ºé•œåƒ
âœ… åç»­è¿è¡Œç›´æ¥å¯åŠ¨ï¼ˆç§’çº§ï¼‰
âœ… é•œåƒè¢«ç¼“å­˜å’Œé‡ç”¨
âœ… åŒåé•œåƒä¼šè¢«è¦†ç›–ï¼ˆbackend:devï¼‰
```

### Docker é•œåƒç®¡ç†æœºåˆ¶

```
ç¬¬ä¸€æ¬¡è¿è¡Œï¼š
  æ„å»º â†’ åˆ›å»º backend:dev (500MB)
  
ç¬¬äºŒæ¬¡è¿è¡Œï¼ˆæ²¡æœ‰ä»£ç ä¿®æ”¹ï¼‰ï¼š
  ç›´æ¥ä½¿ç”¨ç¼“å­˜çš„ backend:dev âœ…
  ä¸ä¼šåˆ›å»ºæ–°é•œåƒ
  
ç¬¬ä¸‰æ¬¡è¿è¡Œï¼ˆä¿®æ”¹äº†ä»£ç ï¼‰ï¼š
  å¦‚æœæ²¡åŠ  --buildï¼š
    ä»ä½¿ç”¨æ—§é•œåƒ âš ï¸
    ä½†ä»£ç é€šè¿‡ volume mounting è‡ªåŠ¨æ›´æ–° âœ…
  
  å¦‚æœåŠ äº† --buildï¼š
    æ„å»ºæ–°é•œåƒ â†’ è¦†ç›– backend:dev âœ…
    æ—§çš„å±‚å¯èƒ½å˜æˆ <none> (æ‚¬ç©ºé•œåƒ)
```

### ä»€ä¹ˆæ—¶å€™éœ€è¦é‡æ–°æ„å»ºï¼Ÿ

**ä¸éœ€è¦é‡æ–°æ„å»ºï¼ˆ99% çš„æƒ…å†µï¼‰ï¼š**
- âœ… ä¿®æ”¹ Python ä»£ç  (`app/` ç›®å½•)
- âœ… ä¿®æ”¹é…ç½®æ–‡ä»¶ (`alembic.ini` ç­‰)
- âœ… ä¿®æ”¹ç¯å¢ƒå˜é‡ (`.env.local`)
- **åŸå› ï¼šé€šè¿‡ volume mountingï¼Œä»£ç ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ**

**éœ€è¦é‡æ–°æ„å»ºï¼š**
- âŒ æ·»åŠ /åˆ é™¤ Python ä¾èµ– (`requirements.txt`)
- âŒ ä¿®æ”¹ Dockerfile
- âŒ æ›´æ–°ç³»ç»ŸåŒ…

```bash
# æ·»åŠ æ–°ä¾èµ–å
echo "new-package==1.0.0" >> requirements.txt
./scripts/dev.sh build  # é‡æ–°æ„å»º
./scripts/dev.sh up     # å¯åŠ¨
```

---

## ğŸ§¹ æ¸…ç†ç£ç›˜ç©ºé—´

### æŸ¥çœ‹ Docker ç£ç›˜å ç”¨

```bash
docker system df

# è¾“å‡ºç¤ºä¾‹ï¼š
# TYPE            TOTAL    ACTIVE   SIZE      RECLAIMABLE
# Images          10       3        2.5GB     1.2GB (48%)
# Containers      5        3        50MB      20MB (40%)
# Local Volumes   2        1        100MB     50MB (50%)
# Build Cache     50       0        500MB     500MB (100%)
```

### æ–¹æ³• 1: ä½¿ç”¨è„šæœ¬æ¸…ç†ï¼ˆæ¨èï¼‰â­ï¸

```bash
./scripts/dev.sh clean

# è‡ªåŠ¨æ‰§è¡Œï¼š
# 1. åœæ­¢å¹¶åˆ é™¤å®¹å™¨
# 2. åˆ é™¤æ‚¬ç©ºé•œåƒ (<none>)
# 3. æ¸…ç†æ„å»ºç¼“å­˜
# 4. æ˜¾ç¤ºèŠ‚çœçš„ç©ºé—´
```

### æ–¹æ³• 2: æ‰‹åŠ¨æ¸…ç†

```bash
# 1. æ¸…ç†æ‚¬ç©ºé•œåƒï¼ˆ<none> æ ‡ç­¾ï¼‰
docker image prune -f

# 2. æ¸…ç†åœæ­¢çš„å®¹å™¨
docker container prune -f

# 3. æ¸…ç†æœªä½¿ç”¨çš„ç½‘ç»œ
docker network prune -f

# 4. æ¸…ç†æ„å»ºç¼“å­˜
docker builder prune -f

# 5. æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æºï¼ˆè°¨æ…ï¼ï¼‰
docker system prune -af
```

### æ–¹æ³• 3: åˆ é™¤ç‰¹å®šé•œåƒ

```bash
# æŸ¥çœ‹æ‰€æœ‰é•œåƒ
docker images

# åˆ é™¤å¼€å‘é•œåƒï¼ˆä¼šé‡æ–°æ„å»ºï¼‰
docker rmi ai-job-matching-backend:dev
docker rmi ai-job-matching-celery:dev

# åˆ é™¤æ‚¬ç©ºé•œåƒ
docker images -f "dangling=true" -q | xargs docker rmi
```

---

## ğŸ“Š å¼€å‘æµç¨‹å¯¹æ¯”

### âŒ ä½æ•ˆæµç¨‹ï¼ˆä¸æ¨èï¼‰

```bash
# æ¯æ¬¡å¼€å‘éƒ½è¿™æ ·ï¼š
./scripts/dev.sh up     # ä½¿ç”¨æ—§ç‰ˆ --buildï¼Œæ¯æ¬¡éƒ½æ„å»º âŒ
# ... å¼€å‘ ...
Ctrl + C                # å®¹å™¨è¿˜åœ¨è¿è¡Œ âŒ
# ç¬¬äºŒå¤©ç»§ç»­å¼€å‘
./scripts/dev.sh up     # åˆæ„å»ºä¸€æ¬¡ âŒ

é—®é¢˜ï¼š
- æ¯æ¬¡å¯åŠ¨ç­‰å¾… 30-60 ç§’æ„å»º
- äº§ç”Ÿå¤šä¸ªæ‚¬ç©ºé•œåƒ
- å®¹å™¨æ®‹ç•™å ç”¨èµ„æº
```

### âœ… é«˜æ•ˆæµç¨‹ï¼ˆæ¨èï¼‰

```bash
# ç¬¬ä¸€å¤©ï¼š
./scripts/dev.sh up     # é¦–æ¬¡æ„å»ºï¼ˆä¸€æ¬¡æ€§ï¼‰
# ... å¼€å‘ ...
Ctrl + C
./scripts/dev.sh down   # æ¸…ç†å®¹å™¨ âœ…

# ç¬¬äºŒå¤©ï¼š
./scripts/dev.sh up     # ç§’çº§å¯åŠ¨ï¼âœ…
# ... å¼€å‘ ...
Ctrl + C
./scripts/dev.sh down

# ä¸€å‘¨åæ¸…ç†ä¸€æ¬¡ï¼š
./scripts/dev.sh clean  # é‡Šæ”¾ç£ç›˜ç©ºé—´ âœ…

ä¼˜åŠ¿ï¼š
- âœ… å¯åŠ¨å¿«ï¼ˆ3-5 ç§’ï¼‰
- âœ… ç£ç›˜å ç”¨å°‘
- âœ… æ²¡æœ‰èµ„æºæ®‹ç•™
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å¯åŠ¨å’Œåœæ­¢

```bash
# å¯åŠ¨å¼€å‘
./scripts/dev.sh

# åœæ­¢å¼€å‘ï¼ˆä¸¤ç§æ–¹å¼ï¼‰
Ctrl + C                    # åœæ­¢æ—¥å¿—
./scripts/dev.sh down       # æ¸…ç†å®¹å™¨ â† æ¨èï¼

# æˆ–è€…ç”¨ stopï¼ˆä¿ç•™å®¹å™¨ï¼Œå¿«é€Ÿé‡å¯ï¼‰
Ctrl + C
./scripts/dev.sh stop       # åªåœæ­¢ï¼Œä¸åˆ é™¤
./scripts/dev.sh up         # ç§’çº§é‡å¯
```

### 2. ä½•æ—¶é‡æ–°æ„å»º

```bash
# å¤§éƒ¨åˆ†æƒ…å†µä¸éœ€è¦ï¼
# ä¿®æ”¹ä»£ç  â†’ ä¿å­˜ â†’ è‡ªåŠ¨ç”Ÿæ•ˆ

# åªæœ‰æ”¹äº†ä¾èµ–æ‰éœ€è¦ï¼š
vim requirements.txt        # æ·»åŠ æ–°åŒ…
./scripts/dev.sh build      # é‡æ–°æ„å»º
./scripts/dev.sh up         # å¯åŠ¨
```

### 3. å®šæœŸæ¸…ç†

```bash
# æ¯å‘¨æˆ–æ¯æœˆæ¸…ç†ä¸€æ¬¡
./scripts/dev.sh clean

# æˆ–è€…æ‰‹åŠ¨æ£€æŸ¥
docker system df
docker images | grep "<none>"  # æŸ¥çœ‹æ‚¬ç©ºé•œåƒ
```

### 4. ç£ç›˜ä¸è¶³æ—¶

```bash
# 1. å…ˆæ¸…ç†å¼€å‘ç¯å¢ƒ
./scripts/dev.sh clean

# 2. æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„ Docker èµ„æº
docker system prune -af
# âš ï¸ è­¦å‘Šï¼šä¼šåˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒï¼

# 3. æ¸…ç†ç‰¹å®šé•œåƒ
docker images
docker rmi <IMAGE_ID>

# 4. æŸ¥çœ‹æ•ˆæœ
docker system df
```

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: æŒ‰ Ctrl+C åå®¹å™¨è¿˜åœ¨è¿è¡Œï¼Ÿ

**A:** æ˜¯çš„ï¼`Ctrl+C` åªåœæ­¢å‰å°æ—¥å¿—ï¼Œå®¹å™¨è¿˜åœ¨åå°ã€‚

```bash
# éªŒè¯
docker compose ps

# è§£å†³
./scripts/dev.sh down
```

### Q2: æ¯æ¬¡å¯åŠ¨éƒ½å¾ˆæ…¢ï¼Ÿ

**A:** æ—§ç‰ˆè„šæœ¬ç”¨äº† `--build`ã€‚æ–°ç‰ˆå·²ä¼˜åŒ–ï¼

```bash
# é¦–æ¬¡å¯åŠ¨ï¼š30-60 ç§’ï¼ˆæ„å»ºï¼‰
./scripts/dev.sh

# åç»­å¯åŠ¨ï¼š3-5 ç§’ï¼ˆç›´æ¥è¿è¡Œï¼‰âœ…
./scripts/dev.sh
```

### Q3: ç£ç›˜ç©ºé—´ä¸è¶³ï¼Ÿ

**A:** ä½¿ç”¨æ¸…ç†å‘½ä»¤ï¼š

```bash
# æ–¹æ³• 1ï¼ˆæ¨èï¼‰
./scripts/dev.sh clean

# æ–¹æ³• 2ï¼ˆæ·±åº¦æ¸…ç†ï¼‰
docker system prune -af
```

### Q4: ä¿®æ”¹ä»£ç åæ²¡æœ‰ç”Ÿæ•ˆï¼Ÿ

**A:** æ£€æŸ¥æ˜¯å¦ç”¨äº† volume mountingï¼š

```bash
# æŸ¥çœ‹ backend é…ç½®
docker compose -f docker-compose.yml -f docker-compose.dev.yml config | grep -A 5 "volumes:"

# åº”è¯¥çœ‹åˆ°ï¼š
# volumes:
#   - ./app:/app/app
```

å¦‚æœæ²¡æœ‰ volumeï¼Œè¯´æ˜ç”¨äº†ç”Ÿäº§é…ç½®ï¼š
```bash
# ç¡®ä¿ç”¨å¼€å‘é…ç½®
./scripts/dev.sh down
./scripts/dev.sh up  # ä½¿ç”¨ dev.sh å¯åŠ¨
```

### Q5: `<none>` é•œåƒæ˜¯ä»€ä¹ˆï¼Ÿ

**A:** æ‚¬ç©ºé•œåƒï¼ˆdangling imagesï¼‰ã€‚

```bash
# äº§ç”ŸåŸå› ï¼š
# é‡æ–°æ„å»ºæ—¶ï¼Œæ—§çš„å±‚è¢«æ›¿æ¢ï¼Œä½†æ²¡æœ‰æ¸…ç†

# æŸ¥çœ‹
docker images -f "dangling=true"

# åˆ é™¤
docker image prune -f
# æˆ–
./scripts/dev.sh clean
```

---

## ğŸ“‹ å‘½ä»¤é€ŸæŸ¥è¡¨

```bash
# å¯åŠ¨å¼€å‘
./scripts/dev.sh              # é¦–æ¬¡æ„å»ºï¼Œåç»­ç§’å¯

# åœæ­¢å¼€å‘
Ctrl + C                      # åœæ­¢æ—¥å¿—
./scripts/dev.sh down         # æ¸…ç†å®¹å™¨ï¼ˆæ¨èï¼‰
./scripts/dev.sh stop         # åªåœæ­¢ï¼Œä¸åˆ é™¤ï¼ˆå¿«é€Ÿé‡å¯ï¼‰

# æ„å»ºå’Œæ¸…ç†
./scripts/dev.sh build        # é‡æ–°æ„å»ºï¼ˆä¾èµ–å˜åŒ–æ—¶ï¼‰
./scripts/dev.sh clean        # æ¸…ç†æ‚¬ç©ºé•œåƒå’Œç¼“å­˜

# æŸ¥çœ‹å’Œè°ƒè¯•
./scripts/dev.sh logs         # æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
./scripts/dev.sh logs backend # æŸ¥çœ‹ backend æ—¥å¿—
./scripts/dev.sh shell        # è¿›å…¥ backend å®¹å™¨
docker compose ps             # æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
docker system df              # æŸ¥çœ‹ç£ç›˜å ç”¨

# ç£ç›˜ç®¡ç†
docker images                 # æŸ¥çœ‹æ‰€æœ‰é•œåƒ
docker image prune -f         # åˆ é™¤æ‚¬ç©ºé•œåƒ
docker system prune -af       # æ·±åº¦æ¸…ç†ï¼ˆè°¨æ…ï¼‰
```

---

## ğŸ¯ æ¨èå·¥ä½œæµç¨‹

```bash
# æ¯å¤©å¼€å§‹å·¥ä½œ
./scripts/dev.sh              # ç§’çº§å¯åŠ¨

# å¼€å‘ä¸­
# ä¿®æ”¹ä»£ç  â†’ ä¿å­˜ â†’ è‡ªåŠ¨é‡è½½ â†’ æŸ¥çœ‹æ•ˆæœ

# ç»“æŸå·¥ä½œ
Ctrl + C
./scripts/dev.sh down         # æ¸…ç†å®¹å™¨

# æ¯å‘¨ç»´æŠ¤
./scripts/dev.sh clean        # æ¸…ç†ç£ç›˜

# æ·»åŠ ä¾èµ–æ—¶
vim requirements.txt
./scripts/dev.sh build        # é‡æ–°æ„å»º
./scripts/dev.sh up           # å¯åŠ¨
```

è¿™æ ·å¯ä»¥ï¼š
- âœ… å¯åŠ¨å¿«é€Ÿï¼ˆ3-5 ç§’ï¼‰
- âœ… ç£ç›˜å ç”¨å°‘
- âœ… å¼€å‘æ•ˆç‡é«˜
- âœ… æ²¡æœ‰èµ„æºæµªè´¹

Happy coding! ğŸš€

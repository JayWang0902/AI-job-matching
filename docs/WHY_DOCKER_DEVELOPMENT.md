# ä¸ºä»€ä¹ˆä½¿ç”¨ Docker å¼€å‘ï¼Ÿ

## ğŸ¯ æ¨èï¼šDocker å¼€å‘ï¼ˆVolume Mounting æ¨¡å¼ï¼‰

### âœ… ä¼˜åŠ¿

1. **ç¯å¢ƒä¸€è‡´æ€§ 100%**
   - æœ¬åœ°å¼€å‘ç¯å¢ƒ = ç”Ÿäº§ç¯å¢ƒ
   - é¿å… "åœ¨æˆ‘æœºå™¨ä¸Šèƒ½è·‘" é—®é¢˜
   - å›¢é˜Ÿæˆå‘˜ç¯å¢ƒå®Œå…¨ä¸€è‡´

2. **å¼€å‘æ•ˆç‡é«˜**
   ```bash
   # å¯åŠ¨å¼€å‘ç¯å¢ƒ
   docker compose -f docker-compose.dev.yml up
   
   # ä¿®æ”¹ä»£ç ï¼ˆapp/main.pyï¼‰
   vim app/main.py
   
   # ä¿å­˜åï¼Œuvicorn è‡ªåŠ¨é‡è½½ï¼ˆ1-2 ç§’ï¼‰
   # âœ… ç«‹å³åœ¨æµè§ˆå™¨çœ‹åˆ°æ•ˆæœ
   ```

3. **å¤šæœåŠ¡ç®¡ç†ç®€å•**
   - âœ… Backend + Celery + Redis + PostgreSQL + Frontend
   - âœ… ä¸€ä¸ªå‘½ä»¤å¯åŠ¨æ‰€æœ‰æœåŠ¡
   - âœ… æœåŠ¡é—´ç½‘ç»œè‡ªåŠ¨é…ç½®
   - âœ… ä¾èµ–å…³ç³»è‡ªåŠ¨å¤„ç†

4. **æ•°æ®åº“æµ‹è¯•å®‰å…¨**
   - âœ… æœ¬åœ°ç”¨ SQLite æˆ–ç‹¬ç«‹ PostgreSQL
   - âœ… ä¸ä¼šå½±å“ç”Ÿäº§æ•°æ®
   - âœ… éšæ—¶å¯ä»¥é‡ç½®æ•°æ®

5. **CI/CD é¢„éªŒè¯**
   ```bash
   # æœ¬åœ°æµ‹è¯•ç”Ÿäº§é•œåƒ
   docker compose build
   docker compose up -d
   
   # å¦‚æœæœ¬åœ°è·‘é€šï¼Œæ¨é€å 99% ä¸ä¼šå‡ºé—®é¢˜
   ```

### âš ï¸ æ‰‹åŠ¨å¼€å‘çš„é—®é¢˜

```bash
# æ‰‹åŠ¨å¼€å‘éœ€è¦ï¼š
pip install -r requirements.txt          # 1. å®‰è£… Python ä¾èµ–
brew install postgresql@15               # 2. å®‰è£…æ•°æ®åº“
brew install redis                       # 3. å®‰è£… Redis
createdb ai_job_matching                 # 4. åˆ›å»ºæ•°æ®åº“
psql -c "CREATE EXTENSION vector;"       # 5. å®‰è£… pgvectorï¼ˆå¯èƒ½å¤±è´¥ï¼‰
export DATABASE_URL=...                  # 6. é…ç½®ç¯å¢ƒå˜é‡
export REDIS_URL=...                     # 7. æ›´å¤šç¯å¢ƒå˜é‡
redis-server &                           # 8. å¯åŠ¨ Redis
uvicorn app.main:app --reload &          # 9. å¯åŠ¨ Backend
celery -A app.celery_app worker &        # 10. å¯åŠ¨ Celery
cd frontend && npm run dev &             # 11. å¯åŠ¨ Frontend

# âŒ 12 ä¸ªæ­¥éª¤ï¼Œå®¹æ˜“å‡ºé”™
# âŒ ç‰ˆæœ¬ä¸ä¸€è‡´ï¼ˆæœ¬åœ° PostgreSQL 14 vs ç”Ÿäº§ 15ï¼‰
# âŒ ç³»ç»Ÿå·®å¼‚ï¼ˆmacOS vs Linuxï¼‰
# âŒ æ–°æˆå‘˜ä¸Šæ‰‹å›°éš¾
```

å¯¹æ¯” Dockerï¼š
```bash
docker compose -f docker-compose.dev.yml up

# âœ… ä¸€ä¸ªå‘½ä»¤ï¼Œ3 ç§’æå®š
# âœ… å®Œå…¨ä¸€è‡´çš„ç¯å¢ƒ
```

## ğŸš€ æ¨èçš„å¼€å‘æµç¨‹

### æ—¥å¸¸å¼€å‘ï¼ˆå¿«é€Ÿè¿­ä»£ï¼‰

```bash
# 1. å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆç¬¬ä¸€æ¬¡ï¼‰
./scripts/dev.sh

# 2. ä¿®æ”¹ä»£ç 
# ç¼–è¾‘ app/api/auth.py
# ä¿å­˜åè‡ªåŠ¨é‡è½½ï¼ˆ1-2 ç§’ï¼‰

# 3. æŸ¥çœ‹æ•ˆæœ
# æµè§ˆå™¨è®¿é—® http://localhost:8000/docs
# âœ… ç«‹å³çœ‹åˆ°å˜åŒ–

# 4. æŸ¥çœ‹æ—¥å¿—
docker compose -f docker-compose.dev.yml logs -f backend

# 5. åœæ­¢å¼€å‘
Ctrl+C
```

### æ¨é€å‰éªŒè¯ï¼ˆæ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒï¼‰

```bash
# 1. æ„å»ºç”Ÿäº§é•œåƒ
docker compose build

# 2. è¿è¡Œç”Ÿäº§é•œåƒï¼ˆæœ¬åœ°ï¼‰
docker compose up -d

# 3. æµ‹è¯•
curl http://localhost:8000/health

# 4. å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œæ¨é€
git add .
git commit -m "feat: new feature"
git push

# âœ… EC2 ä¸Šä¸ä¼šå‡ºé—®é¢˜
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | Docker å¼€å‘ | æ‰‹åŠ¨å¼€å‘ |
|------|------------|---------|
| é¦–æ¬¡å¯åŠ¨ | 3-5 ç§’ | 5-10 åˆ†é’Ÿé…ç½® |
| ä»£ç çƒ­é‡è½½ | 1-2 ç§’ | 1-2 ç§’ |
| ç¯å¢ƒä¸€è‡´æ€§ | âœ… 100% | âŒ 60-70% |
| æ–°æˆå‘˜ä¸Šæ‰‹ | âœ… 5 åˆ†é’Ÿ | âŒ 2-3 å°æ—¶ |
| å¤šæœåŠ¡ç®¡ç† | âœ… ç®€å• | âŒ å¤æ‚ |
| CI/CD ä¸€è‡´ | âœ… å®Œå…¨ä¸€è‡´ | âŒ å¯èƒ½ä¸åŒ |

## ğŸ“ æœ€ä½³å®è·µ

### 1. Volume Mounting å¼€å‘ï¼ˆæ—¥å¸¸ä½¿ç”¨ï¼‰
```yaml
# docker-compose.dev.yml
services:
  backend:
    volumes:
      - ./app:/app/app  # ä»£ç å®æ—¶åŒæ­¥
    command: uvicorn app.main:app --reload --host 0.0.0.0
```

**ç‰¹ç‚¹ï¼š**
- âœ… ä¿®æ”¹ä»£ç ç«‹å³ç”Ÿæ•ˆ
- âœ… ä¸éœ€è¦é‡æ–°æ„å»ºé•œåƒ
- âœ… ä¿ç•™æ•°æ®åº“çŠ¶æ€
- âš¡ï¸ å¼€å‘æ•ˆç‡æœ€é«˜

### 2. æœ¬åœ°é•œåƒæ„å»ºï¼ˆæ¨é€å‰éªŒè¯ï¼‰
```bash
# å®Œå…¨æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒ
docker compose build
docker compose up -d

# æµ‹è¯•é€šè¿‡åå†æ¨é€
```

**ç‰¹ç‚¹ï¼š**
- âœ… 100% æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒ
- âœ… éªŒè¯ Dockerfile æ­£ç¡®æ€§
- âœ… éªŒè¯ä¾èµ–å®Œæ•´æ€§
- ğŸ›¡ï¸ é™ä½ç”Ÿäº§ç¯å¢ƒé£é™©

## ğŸ” å¸¸è§é—®é¢˜

### Q: Docker å¼€å‘ä¼šå¾ˆæ…¢å—ï¼Ÿ
A: ä¸ä¼šï¼ä½¿ç”¨ volume mounting åï¼Œä»£ç ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆï¼Œçƒ­é‡è½½é€Ÿåº¦å’Œæ‰‹åŠ¨å¼€å‘ä¸€æ ·å¿«ï¼ˆ1-2 ç§’ï¼‰ã€‚

### Q: æ¯æ¬¡ä¿®æ”¹éƒ½è¦é‡æ–°æ„å»ºé•œåƒå—ï¼Ÿ
A: ä¸ç”¨ï¼æ—¥å¸¸å¼€å‘ç”¨ `docker-compose.dev.yml`ï¼Œä»£ç æŒ‚è½½åˆ°å®¹å™¨é‡Œï¼Œä¸éœ€è¦é‡æ–°æ„å»ºã€‚åªæœ‰åœ¨æ¨é€å‰éªŒè¯æ—¶æ‰æ„å»ºé•œåƒã€‚

### Q: Docker å ç”¨èµ„æºå¤§å—ï¼Ÿ
A: åˆç†ã€‚ä½ çš„ 5 ä¸ªæœåŠ¡æœ¬æ¥å°±è¦è¿è¡Œï¼Œæ‰‹åŠ¨å¼€å‘ä¹Ÿè¦å ç”¨ç›¸åŒçš„ CPU/å†…å­˜ã€‚Docker åªæ˜¯å¸®ä½ ç®¡ç†å®ƒä»¬ã€‚

### Q: è°ƒè¯•æ–¹ä¾¿å—ï¼Ÿ
A: å¾ˆæ–¹ä¾¿ï¼
```bash
# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f backend

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker compose exec backend python

# è¿è¡Œæµ‹è¯•
docker compose exec backend pytest

# ä½¿ç”¨ VS Code è¿œç¨‹è°ƒè¯•
# å®‰è£… Remote-Containers æ’ä»¶å³å¯
```

### Q: æ–°ä¾èµ–æ€ä¹ˆåŠï¼Ÿ
A: 
```bash
# æ–¹æ³• 1ï¼šé‡æ–°æ„å»ºï¼ˆæ¨èï¼‰
echo "new-package==1.0.0" >> requirements.txt
docker compose -f docker-compose.dev.yml build backend
docker compose -f docker-compose.dev.yml up -d backend

# æ–¹æ³• 2ï¼šä¸´æ—¶å®‰è£…ï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰
docker compose exec backend pip install new-package
# æµ‹è¯•é€šè¿‡åï¼ŒåŠ å…¥ requirements.txt
```

## ğŸ¯ æ€»ç»“

**å¼ºçƒˆæ¨èä½¿ç”¨ Docker å¼€å‘ï¼**

ç†ç”±ï¼š
1. âœ… ç¯å¢ƒä¸€è‡´æ€§ä¿è¯
2. âœ… å¤šæœåŠ¡ç®¡ç†ç®€å•
3. âœ… å›¢é˜Ÿåä½œå‹å¥½
4. âœ… ä¸ CI/CD å®Œå…¨ä¸€è‡´
5. âœ… å¼€å‘æ•ˆç‡ä¸æ‰“æŠ˜

**å¼€å‘æµç¨‹ï¼š**
```
æ—¥å¸¸å¼€å‘ â†’ docker-compose.dev.yml (volume mounting)
æ¨é€å‰éªŒè¯ â†’ docker compose build + up -d (ç”Ÿäº§é•œåƒ)
æ¨é€éƒ¨ç½² â†’ GitHub Actions â†’ EC2
```

è¿™æ ·æ—¢ä¿è¯äº†å¼€å‘æ•ˆç‡ï¼Œåˆç¡®ä¿äº†ç¯å¢ƒä¸€è‡´æ€§ï¼ğŸš€
